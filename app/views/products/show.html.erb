<h1><%= @product.name.titleize %> Page</h1>

<% content_for(:navbar) do %>
  <% unless @product.id == @product.category.products.first.id %>
    <%= link_to 'Previous Product', @product.previous, :class => "btn btn-primary" %>
  <% end %>
  <% unless @product.id == @product.category.products.last.id %>
    <%= link_to 'Next Product', @product.next, :class => "btn btn-primary" %>
  <% end %>
<% end %>
<br>

<%= image_tag(@product.image.url(:medium)) %>

<br><br>
<ul class="list-group well">
  <% @product.reviews.each do |review| %>
    <%= content_tag_for(:div, review) do %>
      <li class="list-group-item clearfix">
        <strong><%= review.name %></strong>
        <span class="pull-right">
          <%= button_to upvote_product_review_path(@product, review), :class => "btn btn-success" do %>
            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
          <% end %>
          <%= button_to downvote_product_review_path(@product, review), :class => "btn btn-danger" do %>
            <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
          <% end %>
        </span>
        <span class="pull-right">
          <h4>Votes: <%= review.votes %></h4>
        </span>
        <%= link_to "View review", product_review_path(@product, review), :class => "btn btn-info btn-sm pull-right"%>
        <%= link_to "Delete Review", product_review_path(@product, review), remote: true, :method => 'delete', :class => "btn btn-danger btn-sm pull-right" %>
      </li>
    <% end %>
  <% end %>
</ul>

<div class="btn-group">
  <%= link_to "Edit", edit_product_path(@product), :class => "btn btn-primary" %>
  <%= link_to "Delete", product_path(@product), :class => "btn btn-primary", :data => {:confirm => "You Sure?", :method => 'delete'} %>
  <%= link_to "Add a review", new_product_review_path(@product), :class => "btn btn-primary" %>
</div>

<hr>

<%= link_to "Back to category", category_path(@category) %>
